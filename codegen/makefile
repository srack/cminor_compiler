# Sam Rack
# Compilers
# makefile

cminor: y.tab.o lex.yy.o shared.o decl.o expr.o param_list.o stmt.o type.o symbol.o hash_table.o scope.o library.o register.o main.o
	gcc -g -Wall main.o lex.yy.o y.tab.o shared.o decl.o expr.o param_list.o stmt.o type.o symbol.o hash_table.o scope.o library.o register.o -o cminor

# build all object files
%.o: %.c *.h
	gcc -c -g $< -o $@

# generate scanner files using flex
lex.yy.c lex.yy.h: scanner.l y.tab.h
	flex --header-file=lex.yy.h scanner.l	

# generate parsing files using bison
y.tab.c y.tab.h: parser.bison
	yacc -d -v parser.bison

# remove all files generated by 'make'
clean:
	rm -f lex.yy.* y.output y.tab.* cminor *.o 
